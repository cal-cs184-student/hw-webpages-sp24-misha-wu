<html><head><meta http-equiv="Content-Type" content="text/html; charset=utf-8"/><title>184 Rasterizer</title><style>
/* cspell:disable-file */
/* webkit printing magic: print all background colors */
html {
	-webkit-print-color-adjust: exact;
}
* {
	box-sizing: border-box;
	-webkit-print-color-adjust: exact;
}

html,
body {
	margin: 0;
	padding: 0;
}
@media only screen {
	body {
		margin: 2em auto;
		max-width: 900px;
		color: rgb(55, 53, 47);
	}
}

body {
	line-height: 1.5;
	white-space: pre-wrap;
}

a,
a.visited {
	color: inherit;
	text-decoration: underline;
}

.pdf-relative-link-path {
	font-size: 80%;
	color: #444;
}

h1,
h2,
h3 {
	letter-spacing: -0.01em;
	line-height: 1.2;
	font-weight: 600;
	margin-bottom: 0;
}

.page-title {
	font-size: 2.5rem;
	font-weight: 700;
	margin-top: 0;
	margin-bottom: 0.75em;
}

h1 {
	font-size: 1.875rem;
	margin-top: 1.875rem;
}

h2 {
	font-size: 1.5rem;
	margin-top: 1.5rem;
}

h3 {
	font-size: 1.25rem;
	margin-top: 1.25rem;
}

.source {
	border: 1px solid #ddd;
	border-radius: 3px;
	padding: 1.5em;
	word-break: break-all;
}

.callout {
	border-radius: 3px;
	padding: 1rem;
}

figure {
	margin: 1.25em 0;
	page-break-inside: avoid;
}

figcaption {
	opacity: 0.5;
	font-size: 85%;
	margin-top: 0.5em;
}

mark {
	background-color: transparent;
}

.indented {
	padding-left: 1.5em;
}

hr {
	background: transparent;
	display: block;
	width: 100%;
	height: 1px;
	visibility: visible;
	border: none;
	border-bottom: 1px solid rgba(55, 53, 47, 0.09);
}

img {
	max-width: 100%;
}

@media only print {
	img {
		max-height: 100vh;
		object-fit: contain;
	}
}

@page {
	margin: 1in;
}

.collection-content {
	font-size: 0.875rem;
}

.column-list {
	display: flex;
	justify-content: space-between;
}

.column {
	padding: 0 1em;
}

.column:first-child {
	padding-left: 0;
}

.column:last-child {
	padding-right: 0;
}

.table_of_contents-item {
	display: block;
	font-size: 0.875rem;
	line-height: 1.3;
	padding: 0.125rem;
}

.table_of_contents-indent-1 {
	margin-left: 1.5rem;
}

.table_of_contents-indent-2 {
	margin-left: 3rem;
}

.table_of_contents-indent-3 {
	margin-left: 4.5rem;
}

.table_of_contents-link {
	text-decoration: none;
	opacity: 0.7;
	border-bottom: 1px solid rgba(55, 53, 47, 0.18);
}

table,
th,
td {
	border: 1px solid rgba(55, 53, 47, 0.09);
	border-collapse: collapse;
}

table {
	border-left: none;
	border-right: none;
}

th,
td {
	font-weight: normal;
	padding: 0.25em 0.5em;
	line-height: 1.5;
	min-height: 1.5em;
	text-align: left;
}

th {
	color: rgba(55, 53, 47, 0.6);
}

ol,
ul {
	margin: 0;
	margin-block-start: 0.6em;
	margin-block-end: 0.6em;
}

li > ol:first-child,
li > ul:first-child {
	margin-block-start: 0.6em;
}

ul > li {
	list-style: disc;
}

ul.to-do-list {
	padding-inline-start: 0;
}

ul.to-do-list > li {
	list-style: none;
}

.to-do-children-checked {
	text-decoration: line-through;
	opacity: 0.375;
}

ul.toggle > li {
	list-style: none;
}

ul {
	padding-inline-start: 1.7em;
}

ul > li {
	padding-left: 0.1em;
}

ol {
	padding-inline-start: 1.6em;
}

ol > li {
	padding-left: 0.2em;
}

.mono ol {
	padding-inline-start: 2em;
}

.mono ol > li {
	text-indent: -0.4em;
}

.toggle {
	padding-inline-start: 0em;
	list-style-type: none;
}

/* Indent toggle children */
.toggle > li > details {
	padding-left: 1.7em;
}

.toggle > li > details > summary {
	margin-left: -1.1em;
}

.selected-value {
	display: inline-block;
	padding: 0 0.5em;
	background: rgba(206, 205, 202, 0.5);
	border-radius: 3px;
	margin-right: 0.5em;
	margin-top: 0.3em;
	margin-bottom: 0.3em;
	white-space: nowrap;
}

.collection-title {
	display: inline-block;
	margin-right: 1em;
}

.page-description {
    margin-bottom: 2em;
}

.simple-table {
	margin-top: 1em;
	font-size: 0.875rem;
	empty-cells: show;
}
.simple-table td {
	height: 29px;
	min-width: 120px;
}

.simple-table th {
	height: 29px;
	min-width: 120px;
}

.simple-table-header-color {
	background: rgb(247, 246, 243);
	color: black;
}
.simple-table-header {
	font-weight: 500;
}

time {
	opacity: 0.5;
}

.icon {
	display: inline-block;
	max-width: 1.2em;
	max-height: 1.2em;
	text-decoration: none;
	vertical-align: text-bottom;
	margin-right: 0.5em;
}

img.icon {
	border-radius: 3px;
}

.user-icon {
	width: 1.5em;
	height: 1.5em;
	border-radius: 100%;
	margin-right: 0.5rem;
}

.user-icon-inner {
	font-size: 0.8em;
}

.text-icon {
	border: 1px solid #000;
	text-align: center;
}

.page-cover-image {
	display: block;
	object-fit: cover;
	width: 100%;
	max-height: 30vh;
}

.page-header-icon {
	font-size: 3rem;
	margin-bottom: 1rem;
}

.page-header-icon-with-cover {
	margin-top: -0.72em;
	margin-left: 0.07em;
}

.page-header-icon img {
	border-radius: 3px;
}

.link-to-page {
	margin: 1em 0;
	padding: 0;
	border: none;
	font-weight: 500;
}

p > .user {
	opacity: 0.5;
}

td > .user,
td > time {
	white-space: nowrap;
}

input[type="checkbox"] {
	transform: scale(1.5);
	margin-right: 0.6em;
	vertical-align: middle;
}

p {
	margin-top: 0.5em;
	margin-bottom: 0.5em;
}

.image {
	border: none;
	margin: 1.5em 0;
	padding: 0;
	border-radius: 0;
	text-align: center;
}

.code,
code {
	background: rgba(135, 131, 120, 0.15);
	border-radius: 3px;
	padding: 0.2em 0.4em;
	border-radius: 3px;
	font-size: 85%;
	tab-size: 2;
}

code {
	color: #eb5757;
}

.code {
	padding: 1.5em 1em;
}

.code-wrap {
	white-space: pre-wrap;
	word-break: break-all;
}

.code > code {
	background: none;
	padding: 0;
	font-size: 100%;
	color: inherit;
}

blockquote {
	font-size: 1.25em;
	margin: 1em 0;
	padding-left: 1em;
	border-left: 3px solid rgb(55, 53, 47);
}

.bookmark {
	text-decoration: none;
	max-height: 8em;
	padding: 0;
	display: flex;
	width: 100%;
	align-items: stretch;
}

.bookmark-title {
	font-size: 0.85em;
	overflow: hidden;
	text-overflow: ellipsis;
	height: 1.75em;
	white-space: nowrap;
}

.bookmark-text {
	display: flex;
	flex-direction: column;
}

.bookmark-info {
	flex: 4 1 180px;
	padding: 12px 14px 14px;
	display: flex;
	flex-direction: column;
	justify-content: space-between;
}

.bookmark-image {
	width: 33%;
	flex: 1 1 180px;
	display: block;
	position: relative;
	object-fit: cover;
	border-radius: 1px;
}

.bookmark-description {
	color: rgba(55, 53, 47, 0.6);
	font-size: 0.75em;
	overflow: hidden;
	max-height: 4.5em;
	word-break: break-word;
}

.bookmark-href {
	font-size: 0.75em;
	margin-top: 0.25em;
}

.sans { font-family: ui-sans-serif, -apple-system, BlinkMacSystemFont, "Segoe UI", Helvetica, "Apple Color Emoji", Arial, sans-serif, "Segoe UI Emoji", "Segoe UI Symbol"; }
.code { font-family: "SFMono-Regular", Menlo, Consolas, "PT Mono", "Liberation Mono", Courier, monospace; }
.serif { font-family: Lyon-Text, Georgia, ui-serif, serif; }
.mono { font-family: iawriter-mono, Nitti, Menlo, Courier, monospace; }
.pdf .sans { font-family: Inter, ui-sans-serif, -apple-system, BlinkMacSystemFont, "Segoe UI", Helvetica, "Apple Color Emoji", Arial, sans-serif, "Segoe UI Emoji", "Segoe UI Symbol", 'Twemoji', 'Noto Color Emoji', 'Noto Sans CJK JP'; }
.pdf:lang(zh-CN) .sans { font-family: Inter, ui-sans-serif, -apple-system, BlinkMacSystemFont, "Segoe UI", Helvetica, "Apple Color Emoji", Arial, sans-serif, "Segoe UI Emoji", "Segoe UI Symbol", 'Twemoji', 'Noto Color Emoji', 'Noto Sans CJK SC'; }
.pdf:lang(zh-TW) .sans { font-family: Inter, ui-sans-serif, -apple-system, BlinkMacSystemFont, "Segoe UI", Helvetica, "Apple Color Emoji", Arial, sans-serif, "Segoe UI Emoji", "Segoe UI Symbol", 'Twemoji', 'Noto Color Emoji', 'Noto Sans CJK TC'; }
.pdf:lang(ko-KR) .sans { font-family: Inter, ui-sans-serif, -apple-system, BlinkMacSystemFont, "Segoe UI", Helvetica, "Apple Color Emoji", Arial, sans-serif, "Segoe UI Emoji", "Segoe UI Symbol", 'Twemoji', 'Noto Color Emoji', 'Noto Sans CJK KR'; }
.pdf .code { font-family: Source Code Pro, "SFMono-Regular", Menlo, Consolas, "PT Mono", "Liberation Mono", Courier, monospace, 'Twemoji', 'Noto Color Emoji', 'Noto Sans Mono CJK JP'; }
.pdf:lang(zh-CN) .code { font-family: Source Code Pro, "SFMono-Regular", Menlo, Consolas, "PT Mono", "Liberation Mono", Courier, monospace, 'Twemoji', 'Noto Color Emoji', 'Noto Sans Mono CJK SC'; }
.pdf:lang(zh-TW) .code { font-family: Source Code Pro, "SFMono-Regular", Menlo, Consolas, "PT Mono", "Liberation Mono", Courier, monospace, 'Twemoji', 'Noto Color Emoji', 'Noto Sans Mono CJK TC'; }
.pdf:lang(ko-KR) .code { font-family: Source Code Pro, "SFMono-Regular", Menlo, Consolas, "PT Mono", "Liberation Mono", Courier, monospace, 'Twemoji', 'Noto Color Emoji', 'Noto Sans Mono CJK KR'; }
.pdf .serif { font-family: PT Serif, Lyon-Text, Georgia, ui-serif, serif, 'Twemoji', 'Noto Color Emoji', 'Noto Serif CJK JP'; }
.pdf:lang(zh-CN) .serif { font-family: PT Serif, Lyon-Text, Georgia, ui-serif, serif, 'Twemoji', 'Noto Color Emoji', 'Noto Serif CJK SC'; }
.pdf:lang(zh-TW) .serif { font-family: PT Serif, Lyon-Text, Georgia, ui-serif, serif, 'Twemoji', 'Noto Color Emoji', 'Noto Serif CJK TC'; }
.pdf:lang(ko-KR) .serif { font-family: PT Serif, Lyon-Text, Georgia, ui-serif, serif, 'Twemoji', 'Noto Color Emoji', 'Noto Serif CJK KR'; }
.pdf .mono { font-family: PT Mono, iawriter-mono, Nitti, Menlo, Courier, monospace, 'Twemoji', 'Noto Color Emoji', 'Noto Sans Mono CJK JP'; }
.pdf:lang(zh-CN) .mono { font-family: PT Mono, iawriter-mono, Nitti, Menlo, Courier, monospace, 'Twemoji', 'Noto Color Emoji', 'Noto Sans Mono CJK SC'; }
.pdf:lang(zh-TW) .mono { font-family: PT Mono, iawriter-mono, Nitti, Menlo, Courier, monospace, 'Twemoji', 'Noto Color Emoji', 'Noto Sans Mono CJK TC'; }
.pdf:lang(ko-KR) .mono { font-family: PT Mono, iawriter-mono, Nitti, Menlo, Courier, monospace, 'Twemoji', 'Noto Color Emoji', 'Noto Sans Mono CJK KR'; }
.highlight-default {
	color: rgba(55, 53, 47, 1);
}
.highlight-gray {
	color: rgba(120, 119, 116, 1);
	fill: rgba(120, 119, 116, 1);
}
.highlight-brown {
	color: rgba(159, 107, 83, 1);
	fill: rgba(159, 107, 83, 1);
}
.highlight-orange {
	color: rgba(217, 115, 13, 1);
	fill: rgba(217, 115, 13, 1);
}
.highlight-yellow {
	color: rgba(203, 145, 47, 1);
	fill: rgba(203, 145, 47, 1);
}
.highlight-teal {
	color: rgba(68, 131, 97, 1);
	fill: rgba(68, 131, 97, 1);
}
.highlight-blue {
	color: rgba(51, 126, 169, 1);
	fill: rgba(51, 126, 169, 1);
}
.highlight-purple {
	color: rgba(144, 101, 176, 1);
	fill: rgba(144, 101, 176, 1);
}
.highlight-pink {
	color: rgba(193, 76, 138, 1);
	fill: rgba(193, 76, 138, 1);
}
.highlight-red {
	color: rgba(212, 76, 71, 1);
	fill: rgba(212, 76, 71, 1);
}
.highlight-gray_background {
	background: rgba(241, 241, 239, 1);
}
.highlight-brown_background {
	background: rgba(244, 238, 238, 1);
}
.highlight-orange_background {
	background: rgba(251, 236, 221, 1);
}
.highlight-yellow_background {
	background: rgba(251, 243, 219, 1);
}
.highlight-teal_background {
	background: rgba(237, 243, 236, 1);
}
.highlight-blue_background {
	background: rgba(231, 243, 248, 1);
}
.highlight-purple_background {
	background: rgba(244, 240, 247, 0.8);
}
.highlight-pink_background {
	background: rgba(249, 238, 243, 0.8);
}
.highlight-red_background {
	background: rgba(253, 235, 236, 1);
}
.block-color-default {
	color: inherit;
	fill: inherit;
}
.block-color-gray {
	color: rgba(120, 119, 116, 1);
	fill: rgba(120, 119, 116, 1);
}
.block-color-brown {
	color: rgba(159, 107, 83, 1);
	fill: rgba(159, 107, 83, 1);
}
.block-color-orange {
	color: rgba(217, 115, 13, 1);
	fill: rgba(217, 115, 13, 1);
}
.block-color-yellow {
	color: rgba(203, 145, 47, 1);
	fill: rgba(203, 145, 47, 1);
}
.block-color-teal {
	color: rgba(68, 131, 97, 1);
	fill: rgba(68, 131, 97, 1);
}
.block-color-blue {
	color: rgba(51, 126, 169, 1);
	fill: rgba(51, 126, 169, 1);
}
.block-color-purple {
	color: rgba(144, 101, 176, 1);
	fill: rgba(144, 101, 176, 1);
}
.block-color-pink {
	color: rgba(193, 76, 138, 1);
	fill: rgba(193, 76, 138, 1);
}
.block-color-red {
	color: rgba(212, 76, 71, 1);
	fill: rgba(212, 76, 71, 1);
}
.block-color-gray_background {
	background: rgba(241, 241, 239, 1);
}
.block-color-brown_background {
	background: rgba(244, 238, 238, 1);
}
.block-color-orange_background {
	background: rgba(251, 236, 221, 1);
}
.block-color-yellow_background {
	background: rgba(251, 243, 219, 1);
}
.block-color-teal_background {
	background: rgba(237, 243, 236, 1);
}
.block-color-blue_background {
	background: rgba(231, 243, 248, 1);
}
.block-color-purple_background {
	background: rgba(244, 240, 247, 0.8);
}
.block-color-pink_background {
	background: rgba(249, 238, 243, 0.8);
}
.block-color-red_background {
	background: rgba(253, 235, 236, 1);
}
.select-value-color-uiBlue { background-color: rgba(35, 131, 226, .07); }
.select-value-color-pink { background-color: rgba(245, 224, 233, 1); }
.select-value-color-purple { background-color: rgba(232, 222, 238, 1); }
.select-value-color-green { background-color: rgba(219, 237, 219, 1); }
.select-value-color-gray { background-color: rgba(227, 226, 224, 1); }
.select-value-color-translucentGray { background-color: rgba(255, 255, 255, 0.0375); }
.select-value-color-orange { background-color: rgba(250, 222, 201, 1); }
.select-value-color-brown { background-color: rgba(238, 224, 218, 1); }
.select-value-color-red { background-color: rgba(255, 226, 221, 1); }
.select-value-color-yellow { background-color: rgba(253, 236, 200, 1); }
.select-value-color-blue { background-color: rgba(211, 229, 239, 1); }
.select-value-color-pageGlass { background-color: undefined; }
.select-value-color-washGlass { background-color: undefined; }

.checkbox {
	display: inline-flex;
	vertical-align: text-bottom;
	width: 16;
	height: 16;
	background-size: 16px;
	margin-left: 2px;
	margin-right: 5px;
}

.checkbox-on {
	background-image: url("data:image/svg+xml;charset=UTF-8,%3Csvg%20width%3D%2216%22%20height%3D%2216%22%20viewBox%3D%220%200%2016%2016%22%20fill%3D%22none%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%3E%0A%3Crect%20width%3D%2216%22%20height%3D%2216%22%20fill%3D%22%2358A9D7%22%2F%3E%0A%3Cpath%20d%3D%22M6.71429%2012.2852L14%204.9995L12.7143%203.71436L6.71429%209.71378L3.28571%206.2831L2%207.57092L6.71429%2012.2852Z%22%20fill%3D%22white%22%2F%3E%0A%3C%2Fsvg%3E");
}

.checkbox-off {
	background-image: url("data:image/svg+xml;charset=UTF-8,%3Csvg%20width%3D%2216%22%20height%3D%2216%22%20viewBox%3D%220%200%2016%2016%22%20fill%3D%22none%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%3E%0A%3Crect%20x%3D%220.75%22%20y%3D%220.75%22%20width%3D%2214.5%22%20height%3D%2214.5%22%20fill%3D%22white%22%20stroke%3D%22%2336352F%22%20stroke-width%3D%221.5%22%2F%3E%0A%3C%2Fsvg%3E");
}
	
</style></head><body><article id="3dc90837-0739-4052-95a6-5a12b604f4f9" class="page sans"><header><h1 class="page-title">184 <strong>Rasterizer</strong></h1><p class="page-description"></p></header><div class="page-body"><p id="e61c443f-27ac-4821-9a45-da466e32db32" class="">Michelle Wu</p><h2 id="07dddd61-57de-4a46-ba42-b4f2b65d5399" class=""><strong><strong>Drawing Single-Color Triangles</strong></strong></h2><p id="9dc49421-93f4-4e01-91f3-49a1fd1911d4" class="">We wish to <em>rasterize </em>our triangles, or convert the triangle vector to pixels. </p><p id="f9dcdede-7005-497a-9ea7-133d359aa88c" class="">To do so, we sample each pixel <code>(x,y)</code> at its “midpoint”, ie <code>(x+0.5, y+0.5)</code>. We then evaluate if this midpoint lies within the triangle via three line-tests. If it’s within the bounds of the triangle, we proceed to color it according to parameters. Note that we include sampled “midpoints” that fall on the edges of the triangle.</p><p id="35bdc9a6-8e9f-48a7-9098-19d028922159" class="">To optimize this algorithm, we use a bounding-box to determine which pixels to check; pixels outside of this range are automatically ignored. Furthermore, once a pixel is determined to be out of bounds, the rest of the current loop is skipped. By doing so, we — at most — check each pixel within the bounding box.</p><figure id="b70f4f2b-5eba-423c-aec9-ce9ed90129ea" class="image"><a href="hw1_images/screenshot_2-13_12-3-0.png"><img style="width:800px" src="hw1_images/screenshot_2-13_12-3-0.png"/></a><figcaption>/basic/test4.svg. Notice how jaggies are rendered around the thing vertices of the triangle.</figcaption></figure><p id="a58bb055-d5f8-4420-a5e1-a4827b3927da" class="">
</p><h2 id="4b3a8cee-80ce-4809-9fca-eb4d4b9901e7" class=""><strong><strong>Antialiasing by Supersampling</strong></strong></h2><p id="900067b1-0994-4ccd-9c18-42b5d2f0e288" class="">We then implement supersampling to decrease aliasing. We first initialize a supersample-sized sample buffer to collect sampled Colors.</p><p id="c2910c8a-5033-4dd4-8ba0-85934c7116e3" class="">To supersample, we now adjust our sample locations and sampling frequency from <code>(+0.5, 0.5)</code> and once per pixel to something that depends on a user-set parameter. For instance, at a supersampling rate of 4, we now sample at 4 spots distributed evenly in each pixel. We then store the result in the sample buffer.</p><p id="87ba701c-763e-44c2-8964-12429639f7d9" class="">Finally, when populating the screen buffer, we average the supersampled colors to get a final value, instead of directly pulling from 1 index in the sample buffer.</p><p id="dac3a17c-260b-48ed-b8b1-74dc311486e3" class="">Supersampling increases the sampling frequency. Due to the Nyquist Sampling theorem, frequencies above the nyquist frequency (<code>1/2*sampling_frequency</code>) will be aliased; thus, increasing the sampling rate allows for more frequencies to fall within this range, decreasing aliasing.</p><figure id="398bafcd-c2f2-4677-8939-e13ffd8126e2" class="image"><a href="hw1_images/screenshot_2-13_12-26-40.png"><img style="width:800px" src="hw1_images/screenshot_2-13_12-26-40.png"/></a><figcaption>no supersampling</figcaption></figure><figure id="ffcc299f-aaa9-4d2b-902e-f75637d65042" class="image"><a href="hw1_images/screenshot_2-13_12-26-42.png"><img style="width:800px" src="hw1_images/screenshot_2-13_12-26-42.png"/></a><figcaption>supersampling 4x. See how there are no more visible jaggies, unlike the un-supersampled version.</figcaption></figure><figure id="369e28a4-9333-40b7-b316-16325d894443" class="image"><a href="hw1_images/screenshot_2-13_12-26-44.png"><img style="width:800px" src="hw1_images/screenshot_2-13_12-26-44.png"/></a><figcaption>supersampling 16x. </figcaption></figure><h2 id="11b85cd5-1608-4cd6-8b2d-b64388919404" class="">Transforms</h2><p id="77f3528c-19bd-46c4-943d-be1a0fbeeb29" class="">Cube man decided that he needed to power up. So he turned into a short circuit. (and a traffic cop.</p><figure id="c03b5b5a-8e58-4238-9f3e-1c4b5ef78f38" class="image"><a href="hw1_images/screenshot_2-13_17-7-36.png"><img style="width:800px" src="hw1_images/screenshot_2-13_17-7-36.png"/></a></figure><figure id="68999bff-6baf-4ba6-aead-33f3f6adefb2" class="image"><a href="hw1_images/screenshot_2-13_17-18-35.png"><img style="width:800px" src="hw1_images/screenshot_2-13_17-18-35.png"/></a></figure><h2 id="084e7595-031f-40ac-9df4-56c461809f49" class="">Barycentric coordinates</h2><p id="12a01dd2-eefa-4355-b483-8ad3df21729a" class="">Barycentric coordinates <code>(alpha, beta, gamma)</code> refer the relative position of a point in relation to the endpoints of a triangle; the more weight a corresponding endpoint holds within this combination, the closer the coordinate is to the endpoint.</p><figure id="2526be9b-5160-4268-85d4-5697f1f310a0" class="image"><a href="hw1_images/screenshot_2-13_13-26-1.png"><img style="width:800px" src="hw1_images/screenshot_2-13_13-26-1.png"/></a></figure><p id="3c4ebb8d-4294-4f71-afc7-860b088cad98" class="">For instance, in this image, each endpoint is defined by its own color; in turn, the resulting color of each intermediate pixel within the triangle can be thought of as a barycentric coordinate. </p><p id="b0d86552-e899-43bf-9a87-d465ed009fdb" class="">The closer a point is to the red vertex, then, the more red it is — because the red vertex’s values holds greater weight in its color calculations.</p><figure id="22ac613c-42d7-475b-944c-5d60cadbeca6" class="image"><a href="hw1_images/screenshot_2-13_13-22-44.png"><img style="width:800px" src="hw1_images/screenshot_2-13_13-22-44.png"/></a><figcaption>A smoothly-blended test7.svg</figcaption></figure><h2 id="e0e3ed72-f8b4-439a-84dd-26f1785f3127" class="">Pixel sampling</h2><p id="6e10647d-2b66-4a90-9462-7e31b1513450" class="">Pixel sampling refers to sampling textures to apply them to your pixel space. For instance, you could create a patterned orb by “sampling” from a texture map and applying it onto a circle to create a 3d orb effect.</p><p id="0777201e-49c4-44cc-8efc-85530aaed1d0" class="">To implement this, we had to work between the pixel space and the texture space. We follow the same process as previous parts to decide whether a pixel should be colored or not; if yes, we sample by applying the previously-calculated barycentric coordinates on the <code>uv</code> coordinates. This way, we get the relative point of our sample in texture space. </p><p id="9000519c-72b6-4c51-969c-636bbc42a20d" class="">Now, we evaluate the color at this point in texture space; recall that texture array is discrete, while uv coordinates are continuous. </p><p id="03cdba65-a52b-4f97-b71c-d9243e964e8f" class="">If we choose to sample by <code>P_NEAREST</code>, we choose the closest point in the texture array. This is the simplest pixel sampling method, but can produce lower-quality images with a very pixellated look.</p><p id="731bad47-c0f4-486b-aa51-7b219e670e36" class="">Otherwise, if we choose to sample by <code>P_LINEAR</code>, we linearly interpolate the Colors of the 4 closest values in the texture array to obtain a homogenized Color. This is a more costly method, but produces higher-quality results because it smoothes between pixels.</p><div id="873c43ef-91bf-4d0d-9142-e0f5531865bd" class="column-list"><div id="4b5a6c2d-efa8-4c15-b9b3-88eca06c83b4" style="width:50%" class="column"><figure id="66d64a64-14e1-48ed-9863-4e72d5a7c28a" class="image"><a href="hw1_images/screenshot_2-13_14-13-42.png"><img style="width:800px" src="hw1_images/screenshot_2-13_14-13-42.png"/></a><figcaption>nearest neighbor, no supersampling</figcaption></figure></div><div id="28480c76-4048-45e9-a228-d0ce12247d38" style="width:50%" class="column"><figure id="64bcead8-56f1-4b47-8068-7afb192a354a" class="image"><a href="hw1_images/screenshot_2-13_14-13-49.png"><img style="width:800px" src="hw1_images/screenshot_2-13_14-13-49.png"/></a><figcaption>nearest neighbor, 16x supersampling</figcaption></figure></div></div><div id="7ee63a41-0323-4f58-8cd3-ad8c278fe031" class="column-list"><div id="0aff7143-b95e-48a7-8620-1d9ed1f81a9e" style="width:50%" class="column"><figure id="5772c5a8-c425-4f68-980f-21e203023ad4" class="image"><a href="hw1_images/screenshot_2-13_14-13-54.png"><img style="width:800px" src="hw1_images/screenshot_2-13_14-13-54.png"/></a><figcaption>bilinear, no supersampling</figcaption></figure></div><div id="97ccbe18-a4f5-4037-9499-f8da028b6ce8" style="width:50%" class="column"><figure id="f908bda1-20f5-4a17-82f1-43664998ee0c" class="image"><a href="hw1_images/screenshot_2-13_14-13-57.png"><img style="width:800px" src="hw1_images/screenshot_2-13_14-13-57.png"/></a><figcaption>bilinear, 16x supersampling</figcaption></figure></div></div><ul id="68d9705f-7788-47c5-bd79-63edd2f2dd9a" class="bulleted-list"><li style="list-style-type:disc">Nearest neighbor:<ul id="497af300-751a-4fe1-96e2-22ba35353bdf" class="bulleted-list"><li style="list-style-type:circle">No supersampling: creates these jagged, dotted edges on wavy lines.</li></ul><ul id="fbed081b-1f81-4565-a3e4-48e14df22177" class="bulleted-list"><li style="list-style-type:circle">16x Supersampling: Better quality, slower.</li></ul></li></ul><ul id="c62ec2d0-a277-4ec9-ad16-7d6d6aecf509" class="bulleted-list"><li style="list-style-type:disc">Bilinear:<ul id="e0a5cf42-e79e-49dd-8a65-6e184b3798b8" class="bulleted-list"><li style="list-style-type:circle">No supersampling: lines are marginally smoother but aliasing still exists if you zoom out; this is because the sampling rate does not change.</li></ul><ul id="18363436-016f-4498-bad8-123284a0b9ad" class="bulleted-list"><li style="list-style-type:circle">16x Supersampling: Arguably better, but blurrier; also the slowest method of the bunch.</li></ul></li></ul><p id="9164cf1c-5a33-4f80-8076-7feb60cc2561" class="">There is the greatest difference between methos when there are large but quick changes in the texture — for instance, the lines in the wall of the campanile — at low-none supersampling rates. If nearest neighbor missed sampling those few pixels, it would miss the coloring entirely; however, bilinear interpolation would always catch it due to taking nearby pixels into account. Furthermore, there is no supersampling to increase information.</p><p id="754486ec-38e5-4556-b226-a4bc6a5823dd" class="">
</p><h2 id="67550b7e-3e14-4bce-b15d-c2b60f7af053" class="">Level sampling</h2><ul id="84bdbc46-5e6b-4136-a81e-6be8846e4c2f" class="bulleted-list"><li style="list-style-type:disc">Explain level sampling in your own words and describe how you implemented it for texture mapping.</li></ul><ul id="b7339e5c-5062-46df-bcd6-2bd66cacc60f" class="bulleted-list"><li style="list-style-type:disc">You can now adjust your sampling technique by selecting pixel sampling, level sampling, or the number of samples per pixel. Describe the tradeoffs between speed, memory usage, and antialiasing power between the three various techniques.</li></ul><ul id="8e8e1f0c-6bd7-4dea-9258-d940c7a0c41b" class="bulleted-list"><li style="list-style-type:disc">Using a <em>png</em> file you find yourself, show us four versions of the image, using the combinations of <code>L_ZERO</code> and <code>P_NEAREST</code>, <code>L_ZERO</code> and <code>P_LINEAR</code>, <code>L_NEAREST</code> and <code>P_NEAREST</code>, as well as <code>L_NEAREST</code> and <code>P_LINEAR</code>.<ul id="dc9edac8-3b04-4128-88a7-32dd30f302f3" class="bulleted-list"><li style="list-style-type:circle">To use your own <em>png</em>, make a copy of one of the existing <em>svg</em> files in <em>svg/texmap/</em> (or create your own modelled after one of the provided <em>svg</em> files). Then, near the top of the file, change the texture filename to point to your own <em>png</em>. From there, you can run ./draw and pass in that svg file to render it and then save a screenshot of your results.</li></ul><ul id="b4f33b58-3ee8-4c1d-a5e6-b4daf0227925" class="bulleted-list"><li style="list-style-type:circle"><strong>Note</strong>: Choose a <em>png</em> that showcases the different sampling effects well. You may also want to zoom in/out, use the pixel inspector, etc. to demonstrate the differences.</li></ul><p id="f0fbab77-4f8d-4197-8c97-83e50367445f" class="">
</p></li></ul><p id="830418a9-bfdf-4a6b-8958-9cc9870c8017" class="">Level sampling refers to sampling from different — and possibly multiple — versions of the texture map. Specifically, we use mipmaps of different levels; this is to avoid graphical artifacts from texture minification or over-blurred high-resolution areas.</p><p id="6e2482b7-4e09-4d8f-8992-cfc1589ac5db" class="">To implement this, we first modified our data structures to utilise the <code>SampleParams</code> struct; in it, we store vectors <code>du</code> and <code>dx</code> that give us information about the changes of pixels around <code>(u,v)</code>.</p><p id="80734275-efa0-4d32-ac13-d18b9247fbbe" class="">Then, if we choose to sample at non-zero settings (ie, <code>lsm != L_ZERO</code>), we calculate the level to use, using formulas from lecture. We also make sure to clamp it to the range <code>[0, mipmaps.size()-1]</code> here to avoid indexing errors.</p><p id="a5b46715-0436-4849-8aa0-cb58d0e8ec37" class="">We then sample from the selected mipmap level as usual, in the methods listed in the previous section.</p><p id="17e16cae-e597-4986-a2d0-92cf6e9b2e8c" class="">If we have a setting of <code>L_NEAREST</code>, we’re done here; we’ve texturized this coordinate with a color! Otherwise if we have a setting of <code>L_LINEAR</code>, we sample one more time from an <em>adjacent</em> mipmap level and interpolate over the two colors, giving us a smoother transition between mipmap levels.</p><p id="3d04d53d-fe3d-4cbb-b791-34a9c64f9718" class="">All 3 available options — changing sampling rate, level sampling, and pixel sampling — can bring us improvements in our rendering. However, not all methods are built the same.</p><figure id="11d14cc0-8d22-4ef3-bd60-40e9f8b94b40" class="image"><a href="hw1_images/screenshot_2-13_16-21-56.png"><img style="width:800px" src="hw1_images/screenshot_2-13_16-21-56.png"/></a><figcaption><code>L_ZERO</code> and <code>P_NEAREST</code>: notice the jaggies, specks, and overall crunchiness of the image.</figcaption></figure><figure id="60da90ab-f21f-458c-a4b7-d975f323472c" class="image"><a href="hw1_images/screenshot_2-13_16-22-1.png"><img style="width:800px" src="hw1_images/screenshot_2-13_16-22-1.png"/></a><figcaption><code>L_ZERO</code> and <code>P_LINEAR</code>: visibly less jaggies, especially in the city area; textures are still confusing in the background though. see how the colors are more uniform in the right; this is due to the averaging.</figcaption></figure><figure id="f2366728-9263-44a5-b4bd-13ec9d6e0772" class="image"><a href="hw1_images/screenshot_2-13_16-20-1.png"><img style="width:800px" src="hw1_images/screenshot_2-13_16-20-1.png"/></a><figcaption><code>L_NEAREST</code> and <code>P_NEAREST</code>: textures in the city area look better thanks to texture minification. some pixels are strangely one-offed in color (see right).</figcaption></figure><figure id="75e750c1-0fd4-42a5-8fb7-c26748abc7f1" class="image"><a href="hw1_images/screenshot_2-13_16-20-16.png"><img style="width:800px" src="hw1_images/screenshot_2-13_16-20-16.png"/></a><figcaption><code>L_NEAREST</code> and <code>P_LINEAR</code>: more blurring due to linearly interpolating colors, but buildings are distinct and shapely.</figcaption></figure><p id="46d02083-13c2-4713-b9cc-a0a07ac57ce9" class="">Some more detailed comparisons:</p><div id="ad631b63-69df-4218-bff5-03472fa28cf1" class="column-list"><div id="1bc21ee9-4e9f-4d2a-8dfe-e9b9e8f88d6d" style="width:50.000000000000014%" class="column"><figure id="d06bc13d-4afb-431f-8f37-2e4bf39b5c2b" class="image"><a href="hw1_images/screenshot_2-13_16-27-53.png"><img style="width:800px" src="hw1_images/screenshot_2-13_16-27-53.png"/></a><figcaption><code>L_ZERO</code> and <code>P_NEAREST</code></figcaption></figure></div><div id="f185762d-7940-4eec-adc5-4b640635a99a" style="width:50%" class="column"><figure id="224e28e8-b0f9-42e2-b884-b6dc5323d730" class="image"><a href="hw1_images/screenshot_2-13_16-27-50.png"><img style="width:800px" src="hw1_images/screenshot_2-13_16-27-50.png"/></a><figcaption><code>L_ZERO</code> and <code>P_LINEAR</code></figcaption></figure></div></div><div id="e40818da-177b-4b2c-87ae-eee2577b1c05" class="column-list"><div id="70553464-e0b0-4600-b03e-d0fc11f116ac" style="width:50%" class="column"><figure id="129241d8-6aa7-4b46-ac7d-ff3c19be3894" class="image"><a href="hw1_images/screenshot_2-13_16-28-2.png"><img style="width:800px" src="hw1_images/screenshot_2-13_16-28-2.png"/></a><figcaption><code>L_NEAREST</code> and <code>P_NEAREST</code></figcaption></figure></div><div id="20f02940-1d3f-4baa-aa7f-09a34084850a" style="width:50%" class="column"><figure id="41da7856-094d-498d-81bf-a14d4c409c4d" class="image"><a href="hw1_images/screenshot_2-13_16-28-5.png"><img style="width:800px" src="hw1_images/screenshot_2-13_16-28-5.png"/></a><figcaption><code>L_NEAREST</code> and <code>P_LINEAR</code></figcaption></figure></div></div><figure class="block-color-gray_background callout" style="white-space:pre-wrap;display:flex" id="a7046784-796f-4a44-b9eb-0ffb18e5f3c9"><div style="font-size:1.5em"><span class="icon">💡</span></div><div style="width:100%"><em>notice how there is much less difference between different sampling levels, because we are more zoomed in.</em></div></figure><div id="cf01ef8d-c4e7-4873-8eaa-5eaaa464d4c4" class="column-list"><div id="a17ae72f-e9d8-4b05-998b-0286eebe275a" style="width:50%" class="column"><figure id="d1d5f773-a7a1-4fc8-9105-e366aab650d5" class="image"><a href="hw1_images/screenshot_2-13_16-36-49.png"><img style="width:800px" src="hw1_images/screenshot_2-13_16-36-49.png"/></a><figcaption><code>L_ZERO</code> and <code>P_NEAREST</code> Weird jaggies in the lines, large contrast, random red/blue pixels due to one off sampling.</figcaption></figure><figure id="522d3a76-3615-4bbc-bfe4-9aa097c18436" class="image"><a href="hw1_images/screenshot_2-13_16-36-58.png"><img style="width:800px" src="hw1_images/screenshot_2-13_16-36-58.png"/></a><figcaption><code>L_NEAREST</code> and <code>P_NEAREST</code>  Slightly more blurred than previous (inspect top few pixels) but very similar</figcaption></figure><figure id="bb0ad5e1-feff-4f11-bd80-d00b58bc7b9c" class="image"><a href="hw1_images/screenshot_2-13_16-37-5.png"><img style="width:800px" src="hw1_images/screenshot_2-13_16-37-5.png"/></a><figcaption><code>L_LINEAR</code> and <code>P_NEAREST</code>  Less white “highlights”, thanks to interpolating over levels.</figcaption></figure></div><div id="fa8a24ae-8e02-4a0d-9872-90fc7f0801b2" style="width:49.99999999999999%" class="column"><figure id="d3ec7952-3611-42e0-80ac-238ad4e85f38" class="image"><a href="hw1_images/screenshot_2-13_16-36-52.png"><img style="width:800px" src="hw1_images/screenshot_2-13_16-36-52.png"/></a><figcaption><code>L_ZERO</code> and <code>P_LINEAR</code> Jaggies still out there, but less color variation and smoother transitions.<br/><br/></figcaption></figure><figure id="5c131448-849d-4c94-89bb-d53877370aa0" class="image"><a href="hw1_images/screenshot_2-13_16-37-1.png"><img style="width:800px" src="hw1_images/screenshot_2-13_16-37-1.png"/></a><figcaption><code>L_NEAREST</code> and <code>P_LINEAR</code> Blur! Blur! Blur!</figcaption></figure><p id="3a092ed3-d1d1-4ca7-806f-3c33efad1d10" class="">
</p><figure id="5a1709e1-60c0-4f57-8eed-94a973dfccb8" class="image"><a href="hw1_images/screenshot_2-13_16-37-7.png"><img style="width:800px" src="hw1_images/screenshot_2-13_16-37-7.png"/></a><figcaption><code>L_LINEAR</code> and <code>P_LINEAR</code> THE BLURRIEST OF THEM ALL!</figcaption></figure><p id="dd8b044b-ccf2-4f97-93d0-9b3c5915c513" class="">
</p></div></div><figure class="block-color-gray_background callout" style="white-space:pre-wrap;display:flex" id="545ceba5-2e51-4df4-a299-83effefe02e4"><div style="font-size:1.5em"><span class="icon">💡</span></div><div style="width:100%"><em>notice how L-level differences become more distinct when zoomed out.</em></div></figure><p id="f73f6695-108b-445b-999b-dc1ec15dc098" class="">Supersampling is costly in terms of memory and runtime — <code>n*</code> more for both at a supersampling rate of <code>n^2</code> — but is the best at antialising. This because it directly raises the Nyquist frequency, at the cost of <code>n*</code> more accesses and writes.</p><p id="a7a32245-8b1c-40dd-aca5-56c1f5ab9af9" class="">
</p><p id="9fa21a4d-9767-4655-8b1e-27e2c2ee77b1" class="">Level sampling modifications is the next strongest in terms of anti-alising; it can reduce artifacts caused my texture minification by adjusting the mipmap level sampled from. Level sampling does store extra information, but some can be precomputed, leading it to be much cheaper. Level sampling is faster than supersampling, but still requires time to calculate mipmap levels and even interpolate, if necessary.</p><p id="5352a07d-1f86-41dd-a4e0-db1c8039b177" class="">Pixel sampling can smooth over sharp changes; it is the cheapest technique of all three, but the weakest in terms of correcting aliasing. On its own, it also uses the least amount of memory and runs the fastest.</p><p id="ea0cb189-1729-4f4c-9dbe-e20d73721213" class="">
</p></div></article><span class="sans" style="font-size:14px;padding-top:2em"></span></body></html>